# Qwen MT 图像翻译

一个强大的 OOMOL 包,使用 Qwen 多模态翻译 API 来翻译图像中的文本。该包提供基于 URL 和基于文件的工作流,可以无缝集成图像翻译功能到您的处理流程中。

## 功能特性

- 通过 URL 翻译图像中的文本
- 翻译本地图像文件中的文本
- 支持 9 种语言(中文、英文、韩语、日语、俄语、西班牙语、法语、葡萄牙语、意大利语)
- 自动云端上传和下载
- 可配置的轮询等待翻译完成
- 易于使用的子流程块

## 子流程

该包包含两个主要子流程,适用于不同的使用场景:

### 1. URL 图像翻译

从图像 URL 翻译文本,从源语言到目标语言,并返回翻译后的图像 URL。

**输入:**
- `imageURL` (字符串,必需): 要翻译的图像 URL
- `sourceLang` (字符串,必需): 源语言代码(默认: "en")
  - 选项: zh, en, ko, ja, ru, es, fr, pt, it
- `targetLang` (字符串,必需): 目标语言代码(默认: "zh")
  - 选项: zh, en, ko, ja, ru, es, fr, pt, it

**输出:**
- `translatedImageURL` (字符串): 翻译后的图像 URL

**使用场景:** 适合处理网络托管的图像或希望将图像保留在云端的情况。

### 2. 本地图像翻译

从本地图像文件翻译文本,从源语言到目标语言,并保存结果。

**输入:**
- `image_file` (文件,必需): 要翻译的本地图像文件
- `sourceLang` (字符串,必需): 源语言代码(默认: "en")
- `targetLang` (字符串,必需): 目标语言代码(默认: "zh")
- `saved_path` (字符串,可选): 保存翻译后图像的路径

**输出:**
- `saved_path` (字符串): 成功下载的翻译图像的路径

**使用场景:** 适合批量处理本地图像或将翻译集成到基于文件的工作流中。

## 支持的语言

该包支持以下语言之间的翻译:

| 语言 | 代码 |
|------|------|
| Chinese (简体中文) | zh |
| English (英文) | en |
| Korean (韩语) | ko |
| Japanese (日语) | ja |
| Russian (俄语) | ru |
| Spanish (西班牙语) | es |
| French (法语) | fr |
| Portuguese (葡萄牙语) | pt |
| Italian (意大利语) | it |

## 基本用法

### 使用 URL 图像翻译

1. 将 `url-image-translation` 子流程添加到您的工作流
2. 将图像 URL 连接到 `imageURL` 输入
3. 选择源语言和目标语言
4. 翻译后的图像 URL 将在 `translatedImageURL` 输出中可用

### 使用本地图像翻译

1. 将 `local-image-translation` 子流程添加到您的工作流
2. 使用 `image_file` 输入选择本地图像文件
3. 选择源语言和目标语言
4. 可选择在 `saved_path` 中指定结果保存位置
5. 翻译后的图像将被保存,其路径在输出中返回

## 任务块

该包包含两个核心任务块:

### 提交图像翻译

向 Qwen MT 图像服务提交图像翻译请求并接收用于结果轮询的任务 ID。

**输入:**
- `imageURL` (字符串): 要翻译的图像 URL
- `sourceLang` (字符串): 源语言代码
- `targetLang` (字符串): 目标语言代码

**输出:**
- `taskId` (字符串): 用于轮询翻译结果的任务 ID

### 获取图像翻译结果

使用任务 ID 轮询 Qwen MT 图像服务以获取翻译结果。自动重试直到任务完成或达到最大重试次数。

**输入:**
- `taskId` (字符串): 从提交请求获得的任务 ID
- `maxRetries` (数字,可选): 最大轮询尝试次数(默认: 60)
- `retryInterval` (数字,可选): 轮询之间的间隔秒数(默认: 2)

**输出:**
- `translatedImageURL` (字符串): 翻译后的图像 URL
- `status` (字符串): 翻译任务的最终状态

## 依赖项

该包需要以下 OOMOL 包:
- `upload-to-cloud` (v0.0.5): 用于将本地文件上传到云存储
- `downloader` (v0.1.1): 用于下载翻译后的图像

## 安装

可以通过 OOMOL 包管理器安装该包:

```bash
# 安装包
oomol install qwen-mt-image

# 添加到工作空间依赖项
oomol use qwen-mt-image
```

## 配置

翻译服务使用 OOMOL Fusion API。无需额外的 API 密钥配置 - 该包会自动使用您的 OOMOL 令牌进行身份验证。

## 技术细节

### 工作流架构

两个子流程都遵循类似的模式:

1. **提交阶段**: 将图像(URL 或上传的文件)提交到 Qwen MT API
2. **轮询阶段**: 持续检查翻译状态直到完成
3. **检索阶段**: 返回或下载翻译后的图像

### 轮询机制

轮询系统包括:
- 可配置的重试次数以处理长时间的翻译过程
- 可调整的重试间隔以平衡响应性和 API 负载
- 自动错误处理和状态报告
- 默认配置: 60 次重试,间隔 2 秒(最多 2 分钟)

### API 集成

该包通过 OOMOL 的 Fusion API 端点与 Qwen 多模态翻译 API 集成:
- 基础 URL: `https://fusion-api.oomol.com/v1`
- 身份验证: 通过 OOMOL 令牌自动进行
- 端点: `/image/translation` 用于提交和结果检索

### 翻译过程

1. **图像分析**: AI 分析图像以检测和提取文本
2. **文本翻译**: 检测到的文本从源语言翻译为目标语言
3. **图像渲染**: 翻译后的文本被渲染回图像上,保持原始布局和样式

## 错误处理

该包包含强大的错误处理:
- 连接失败会报告清晰的错误消息
- 超时场景通过重试逻辑优雅处理
- 在整个过程中跟踪和报告翻译状态
- 在提交前验证无效的语言代码

## 使用案例

- **电子商务**: 为国际市场翻译产品图像
- **文档**: 本地化技术图表和截图
- **社交媒体**: 为不同地区调整视觉内容
- **营销**: 为全球活动转换促销材料
- **教育**: 翻译教学材料和信息图表

## 版本

当前版本: 0.0.1

## 许可证

该包作为 OOMOL 生态系统的一部分提供。
